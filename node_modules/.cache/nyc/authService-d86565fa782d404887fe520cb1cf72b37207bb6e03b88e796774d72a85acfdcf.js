function cov_8xupy7a1z(){var path="D:\\rippers\\rippers-bn-be\\src\\Services\\authService.js";var hash="76a00344df9284ab6ec733e16956e20bce706d15";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"D:\\rippers\\rippers-bn-be\\src\\Services\\authService.js",statementMap:{"0":{start:{line:3,column:4},end:{line:3,column:34}},"1":{start:{line:6,column:4},end:{line:6,column:27}},"2":{start:{line:7,column:12},end:{line:7,column:35}},"3":{start:{line:8,column:15},end:{line:8,column:61}},"4":{start:{line:9,column:20},end:{line:55,column:1}},"5":{start:{line:10,column:2},end:{line:54,column:3}},"6":{start:{line:12,column:19},end:{line:15,column:6}},"7":{start:{line:16,column:20},end:{line:16,column:39}},"8":{start:{line:17,column:18},end:{line:17,column:31}},"9":{start:{line:23,column:15},end:{line:27,column:6}},"10":{start:{line:30,column:4},end:{line:34,column:5}},"11":{start:{line:31,column:20},end:{line:31,column:88}},"12":{start:{line:32,column:6},end:{line:32,column:29}},"13":{start:{line:33,column:6},end:{line:33,column:18}},"14":{start:{line:37,column:22},end:{line:42,column:6}},"15":{start:{line:43,column:4},end:{line:50,column:6}},"16":{start:{line:52,column:4},end:{line:52,column:50}},"17":{start:{line:53,column:4},end:{line:53,column:16}},"18":{start:{line:56,column:0},end:{line:58,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:20},end:{line:9,column:21}},loc:{start:{line:9,column:35},end:{line:55,column:1}},line:9}},branchMap:{"0":{loc:{start:{line:30,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:34,column:5}},{start:{line:30,column:4},end:{line:34,column:5}}],line:30}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},f:{"0":0},b:{"0":[0,0]},inputSourceMap:{version:3,names:["OAuth2Client","require","User","jwt","client","process","env","GOOGLE_CLIENT_ID","googleLogin","token","ticket","verifyIdToken","idToken","audience","payload","getPayload","email","user","findOne","where","error","Error","statusCode","authToken","sign","userId","id","role","JWT_SECRET","expiresIn","firstName","lastName","profilePicture","console","module","exports"],sourceRoot:"D:\\rippers\\rippers-bn-be\\src\\Services\\",sources:["authService.js"],sourcesContent:["const { OAuth2Client } = require('google-auth-library');\r\nconst { User } = require('../../models'); // Adjust the path as needed\r\nconst jwt = require('jsonwebtoken');\r\n\r\nconst client = new OAuth2Client(process.env.GOOGLE_CLIENT_ID);\r\n\r\nconst googleLogin = async (token) => {\r\n  try {\r\n    // Verify Google token\r\n    const ticket = await client.verifyIdToken({\r\n      idToken: token,\r\n      audience: process.env.GOOGLE_CLIENT_ID,\r\n    });\r\n\r\n    const payload = ticket.getPayload();\r\n    const email = payload.email; // Use email to check if the user exists\r\n    // const firstName = payload.given_name;\r\n    // const lastName = payload.family_name;\r\n    // const profilePicture = payload.picture;\r\n\r\n    // Check if the user exists in the database using email\r\n    let user = await User.findOne({ where: { email } });\r\n\r\n    // If the user does not exist, create a new user\r\n    if (!user) {\r\n        const error = new Error('Account does not exist. Please create an account first.');\r\n        error.statusCode = 404;\r\n        throw error;\r\n      }\r\n\r\n    // Generate JWT token\r\n    const authToken = jwt.sign({ userId: user.id, role: user.role }, process.env.JWT_SECRET, { expiresIn: '1h' });\r\n\r\n    return {\r\n      userId: user.id,\r\n      firstName: user.firstName,\r\n      lastName: user.lastName,\r\n      email: user.email,\r\n      profilePicture: user.profilePicture,\r\n      token: authToken,\r\n    };\r\n  } catch (error) {\r\n    console.error('Error in googleLogin:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nmodule.exports = { googleLogin };"],mappings:"AAAA,MAAM;EAAEA;AAAa,CAAC,GAAGC,OAAO,CAAC,qBAAqB,CAAC;AACvD,MAAM;EAAEC;AAAK,CAAC,GAAGD,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;AAC1C,MAAME,GAAG,GAAGF,OAAO,CAAC,cAAc,CAAC;AAEnC,MAAMG,MAAM,GAAG,IAAIJ,YAAY,CAACK,OAAO,CAACC,GAAG,CAACC,gBAAgB,CAAC;AAE7D,MAAMC,WAAW,GAAG,MAAOC,KAAK,IAAK;EACnC,IAAI;IACF;IACA,MAAMC,MAAM,GAAG,MAAMN,MAAM,CAACO,aAAa,CAAC;MACxCC,OAAO,EAAEH,KAAK;MACdI,QAAQ,EAAER,OAAO,CAACC,GAAG,CAACC;IACxB,CAAC,CAAC;IAEF,MAAMO,OAAO,GAAGJ,MAAM,CAACK,UAAU,CAAC,CAAC;IACnC,MAAMC,KAAK,GAAGF,OAAO,CAACE,KAAK,CAAC,CAAC;IAC7B;IACA;IACA;;IAEA;IACA,IAAIC,IAAI,GAAG,MAAMf,IAAI,CAACgB,OAAO,CAAC;MAAEC,KAAK,EAAE;QAAEH;MAAM;IAAE,CAAC,CAAC;;IAEnD;IACA,IAAI,CAACC,IAAI,EAAE;MACP,MAAMG,KAAK,GAAG,IAAIC,KAAK,CAAC,yDAAyD,CAAC;MAClFD,KAAK,CAACE,UAAU,GAAG,GAAG;MACtB,MAAMF,KAAK;IACb;;IAEF;IACA,MAAMG,SAAS,GAAGpB,GAAG,CAACqB,IAAI,CAAC;MAAEC,MAAM,EAAER,IAAI,CAACS,EAAE;MAAEC,IAAI,EAAEV,IAAI,CAACU;IAAK,CAAC,EAAEtB,OAAO,CAACC,GAAG,CAACsB,UAAU,EAAE;MAAEC,SAAS,EAAE;IAAK,CAAC,CAAC;IAE7G,OAAO;MACLJ,MAAM,EAAER,IAAI,CAACS,EAAE;MACfI,SAAS,EAAEb,IAAI,CAACa,SAAS;MACzBC,QAAQ,EAAEd,IAAI,CAACc,QAAQ;MACvBf,KAAK,EAAEC,IAAI,CAACD,KAAK;MACjBgB,cAAc,EAAEf,IAAI,CAACe,cAAc;MACnCvB,KAAK,EAAEc;IACT,CAAC;EACH,CAAC,CAAC,OAAOH,KAAK,EAAE;IACda,OAAO,CAACb,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC7C,MAAMA,KAAK;EACb;AACF,CAAC;AAEDc,MAAM,CAACC,OAAO,GAAG;EAAE3B;AAAY,CAAC",ignoreList:[]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"76a00344df9284ab6ec733e16956e20bce706d15"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_8xupy7a1z=function(){return actualCoverage;};}return actualCoverage;}cov_8xupy7a1z();const{OAuth2Client}=(cov_8xupy7a1z().s[0]++,require('google-auth-library'));const{User}=(cov_8xupy7a1z().s[1]++,require('../../models'));// Adjust the path as needed
const jwt=(cov_8xupy7a1z().s[2]++,require('jsonwebtoken'));const client=(cov_8xupy7a1z().s[3]++,new OAuth2Client(process.env.GOOGLE_CLIENT_ID));cov_8xupy7a1z().s[4]++;const googleLogin=async token=>{cov_8xupy7a1z().f[0]++;cov_8xupy7a1z().s[5]++;try{// Verify Google token
const ticket=(cov_8xupy7a1z().s[6]++,await client.verifyIdToken({idToken:token,audience:process.env.GOOGLE_CLIENT_ID}));const payload=(cov_8xupy7a1z().s[7]++,ticket.getPayload());const email=(cov_8xupy7a1z().s[8]++,payload.email);// Use email to check if the user exists
// const firstName = payload.given_name;
// const lastName = payload.family_name;
// const profilePicture = payload.picture;
// Check if the user exists in the database using email
let user=(cov_8xupy7a1z().s[9]++,await User.findOne({where:{email}}));// If the user does not exist, create a new user
cov_8xupy7a1z().s[10]++;if(!user){cov_8xupy7a1z().b[0][0]++;const error=(cov_8xupy7a1z().s[11]++,new Error('Account does not exist. Please create an account first.'));cov_8xupy7a1z().s[12]++;error.statusCode=404;cov_8xupy7a1z().s[13]++;throw error;}else{cov_8xupy7a1z().b[0][1]++;}// Generate JWT token
const authToken=(cov_8xupy7a1z().s[14]++,jwt.sign({userId:user.id,role:user.role},process.env.JWT_SECRET,{expiresIn:'1h'}));cov_8xupy7a1z().s[15]++;return{userId:user.id,firstName:user.firstName,lastName:user.lastName,email:user.email,profilePicture:user.profilePicture,token:authToken};}catch(error){cov_8xupy7a1z().s[16]++;console.error('Error in googleLogin:',error);cov_8xupy7a1z().s[17]++;throw error;}};cov_8xupy7a1z().s[18]++;module.exports={googleLogin};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPQXV0aDJDbGllbnQiLCJyZXF1aXJlIiwiVXNlciIsImp3dCIsImNsaWVudCIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xJRU5UX0lEIiwiZ29vZ2xlTG9naW4iLCJ0b2tlbiIsInRpY2tldCIsInZlcmlmeUlkVG9rZW4iLCJpZFRva2VuIiwiYXVkaWVuY2UiLCJwYXlsb2FkIiwiZ2V0UGF5bG9hZCIsImVtYWlsIiwidXNlciIsImZpbmRPbmUiLCJ3aGVyZSIsImVycm9yIiwiRXJyb3IiLCJzdGF0dXNDb2RlIiwiYXV0aFRva2VuIiwic2lnbiIsInVzZXJJZCIsImlkIiwicm9sZSIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInByb2ZpbGVQaWN0dXJlIiwiY29uc29sZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxyaXBwZXJzXFxyaXBwZXJzLWJuLWJlXFxzcmNcXFNlcnZpY2VzXFwiLCJzb3VyY2VzIjpbImF1dGhTZXJ2aWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgT0F1dGgyQ2xpZW50IH0gPSByZXF1aXJlKCdnb29nbGUtYXV0aC1saWJyYXJ5Jyk7XHJcbmNvbnN0IHsgVXNlciB9ID0gcmVxdWlyZSgnLi4vLi4vbW9kZWxzJyk7IC8vIEFkanVzdCB0aGUgcGF0aCBhcyBuZWVkZWRcclxuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XHJcblxyXG5jb25zdCBjbGllbnQgPSBuZXcgT0F1dGgyQ2xpZW50KHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQpO1xyXG5cclxuY29uc3QgZ29vZ2xlTG9naW4gPSBhc3luYyAodG9rZW4pID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gVmVyaWZ5IEdvb2dsZSB0b2tlblxyXG4gICAgY29uc3QgdGlja2V0ID0gYXdhaXQgY2xpZW50LnZlcmlmeUlkVG9rZW4oe1xyXG4gICAgICBpZFRva2VuOiB0b2tlbixcclxuICAgICAgYXVkaWVuY2U6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBwYXlsb2FkID0gdGlja2V0LmdldFBheWxvYWQoKTtcclxuICAgIGNvbnN0IGVtYWlsID0gcGF5bG9hZC5lbWFpbDsgLy8gVXNlIGVtYWlsIHRvIGNoZWNrIGlmIHRoZSB1c2VyIGV4aXN0c1xyXG4gICAgLy8gY29uc3QgZmlyc3ROYW1lID0gcGF5bG9hZC5naXZlbl9uYW1lO1xyXG4gICAgLy8gY29uc3QgbGFzdE5hbWUgPSBwYXlsb2FkLmZhbWlseV9uYW1lO1xyXG4gICAgLy8gY29uc3QgcHJvZmlsZVBpY3R1cmUgPSBwYXlsb2FkLnBpY3R1cmU7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHVzZXIgZXhpc3RzIGluIHRoZSBkYXRhYmFzZSB1c2luZyBlbWFpbFxyXG4gICAgbGV0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xyXG5cclxuICAgIC8vIElmIHRoZSB1c2VyIGRvZXMgbm90IGV4aXN0LCBjcmVhdGUgYSBuZXcgdXNlclxyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ0FjY291bnQgZG9lcyBub3QgZXhpc3QuIFBsZWFzZSBjcmVhdGUgYW4gYWNjb3VudCBmaXJzdC4nKTtcclxuICAgICAgICBlcnJvci5zdGF0dXNDb2RlID0gNDA0O1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgSldUIHRva2VuXHJcbiAgICBjb25zdCBhdXRoVG9rZW4gPSBqd3Quc2lnbih7IHVzZXJJZDogdXNlci5pZCwgcm9sZTogdXNlci5yb2xlIH0sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQsIHsgZXhwaXJlc0luOiAnMWgnIH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHVzZXJJZDogdXNlci5pZCxcclxuICAgICAgZmlyc3ROYW1lOiB1c2VyLmZpcnN0TmFtZSxcclxuICAgICAgbGFzdE5hbWU6IHVzZXIubGFzdE5hbWUsXHJcbiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gICAgICBwcm9maWxlUGljdHVyZTogdXNlci5wcm9maWxlUGljdHVyZSxcclxuICAgICAgdG9rZW46IGF1dGhUb2tlbixcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdvb2dsZUxvZ2luOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0geyBnb29nbGVMb2dpbiB9OyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUFFQTtBQUFhLENBQUMsR0FBR0MsT0FBTyxDQUFDLHFCQUFxQixDQUFDO0FBQ3ZELE1BQU07RUFBRUM7QUFBSyxDQUFDLEdBQUdELE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO0FBQzFDLE1BQU1FLEdBQUcsR0FBR0YsT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUVuQyxNQUFNRyxNQUFNLEdBQUcsSUFBSUosWUFBWSxDQUFDSyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsZ0JBQWdCLENBQUM7QUFFN0QsTUFBTUMsV0FBVyxHQUFHLE1BQU9DLEtBQUssSUFBSztFQUNuQyxJQUFJO0lBQ0Y7SUFDQSxNQUFNQyxNQUFNLEdBQUcsTUFBTU4sTUFBTSxDQUFDTyxhQUFhLENBQUM7TUFDeENDLE9BQU8sRUFBRUgsS0FBSztNQUNkSSxRQUFRLEVBQUVSLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQztJQUN4QixDQUFDLENBQUM7SUFFRixNQUFNTyxPQUFPLEdBQUdKLE1BQU0sQ0FBQ0ssVUFBVSxDQUFDLENBQUM7SUFDbkMsTUFBTUMsS0FBSyxHQUFHRixPQUFPLENBQUNFLEtBQUssQ0FBQyxDQUFDO0lBQzdCO0lBQ0E7SUFDQTs7SUFFQTtJQUNBLElBQUlDLElBQUksR0FBRyxNQUFNZixJQUFJLENBQUNnQixPQUFPLENBQUM7TUFBRUMsS0FBSyxFQUFFO1FBQUVIO01BQU07SUFBRSxDQUFDLENBQUM7O0lBRW5EO0lBQ0EsSUFBSSxDQUFDQyxJQUFJLEVBQUU7TUFDUCxNQUFNRyxLQUFLLEdBQUcsSUFBSUMsS0FBSyxDQUFDLHlEQUF5RCxDQUFDO01BQ2xGRCxLQUFLLENBQUNFLFVBQVUsR0FBRyxHQUFHO01BQ3RCLE1BQU1GLEtBQUs7SUFDYjs7SUFFRjtJQUNBLE1BQU1HLFNBQVMsR0FBR3BCLEdBQUcsQ0FBQ3FCLElBQUksQ0FBQztNQUFFQyxNQUFNLEVBQUVSLElBQUksQ0FBQ1MsRUFBRTtNQUFFQyxJQUFJLEVBQUVWLElBQUksQ0FBQ1U7SUFBSyxDQUFDLEVBQUV0QixPQUFPLENBQUNDLEdBQUcsQ0FBQ3NCLFVBQVUsRUFBRTtNQUFFQyxTQUFTLEVBQUU7SUFBSyxDQUFDLENBQUM7SUFFN0csT0FBTztNQUNMSixNQUFNLEVBQUVSLElBQUksQ0FBQ1MsRUFBRTtNQUNmSSxTQUFTLEVBQUViLElBQUksQ0FBQ2EsU0FBUztNQUN6QkMsUUFBUSxFQUFFZCxJQUFJLENBQUNjLFFBQVE7TUFDdkJmLEtBQUssRUFBRUMsSUFBSSxDQUFDRCxLQUFLO01BQ2pCZ0IsY0FBYyxFQUFFZixJQUFJLENBQUNlLGNBQWM7TUFDbkN2QixLQUFLLEVBQUVjO0lBQ1QsQ0FBQztFQUNILENBQUMsQ0FBQyxPQUFPSCxLQUFLLEVBQUU7SUFDZGEsT0FBTyxDQUFDYixLQUFLLENBQUMsdUJBQXVCLEVBQUVBLEtBQUssQ0FBQztJQUM3QyxNQUFNQSxLQUFLO0VBQ2I7QUFDRixDQUFDO0FBRURjLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQUUzQjtBQUFZLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfOHh1cHk3YTF6IiwiYWN0dWFsQ292ZXJhZ2UiLCJPQXV0aDJDbGllbnQiLCJzIiwicmVxdWlyZSIsIlVzZXIiLCJqd3QiLCJjbGllbnQiLCJwcm9jZXNzIiwiZW52IiwiR09PR0xFX0NMSUVOVF9JRCIsImdvb2dsZUxvZ2luIiwidG9rZW4iLCJmIiwidGlja2V0IiwidmVyaWZ5SWRUb2tlbiIsImlkVG9rZW4iLCJhdWRpZW5jZSIsInBheWxvYWQiLCJnZXRQYXlsb2FkIiwiZW1haWwiLCJ1c2VyIiwiZmluZE9uZSIsIndoZXJlIiwiYiIsImVycm9yIiwiRXJyb3IiLCJzdGF0dXNDb2RlIiwiYXV0aFRva2VuIiwic2lnbiIsInVzZXJJZCIsImlkIiwicm9sZSIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInByb2ZpbGVQaWN0dXJlIiwiY29uc29sZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJEOlxccmlwcGVyc1xccmlwcGVycy1ibi1iZVxcc3JjXFxTZXJ2aWNlc1xcL2F1dGhTZXJ2aWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgT0F1dGgyQ2xpZW50IH0gPSByZXF1aXJlKCdnb29nbGUtYXV0aC1saWJyYXJ5Jyk7XHJcbmNvbnN0IHsgVXNlciB9ID0gcmVxdWlyZSgnLi4vLi4vbW9kZWxzJyk7IC8vIEFkanVzdCB0aGUgcGF0aCBhcyBuZWVkZWRcclxuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XHJcblxyXG5jb25zdCBjbGllbnQgPSBuZXcgT0F1dGgyQ2xpZW50KHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQpO1xyXG5cclxuY29uc3QgZ29vZ2xlTG9naW4gPSBhc3luYyAodG9rZW4pID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gVmVyaWZ5IEdvb2dsZSB0b2tlblxyXG4gICAgY29uc3QgdGlja2V0ID0gYXdhaXQgY2xpZW50LnZlcmlmeUlkVG9rZW4oe1xyXG4gICAgICBpZFRva2VuOiB0b2tlbixcclxuICAgICAgYXVkaWVuY2U6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBwYXlsb2FkID0gdGlja2V0LmdldFBheWxvYWQoKTtcclxuICAgIGNvbnN0IGVtYWlsID0gcGF5bG9hZC5lbWFpbDsgLy8gVXNlIGVtYWlsIHRvIGNoZWNrIGlmIHRoZSB1c2VyIGV4aXN0c1xyXG4gICAgLy8gY29uc3QgZmlyc3ROYW1lID0gcGF5bG9hZC5naXZlbl9uYW1lO1xyXG4gICAgLy8gY29uc3QgbGFzdE5hbWUgPSBwYXlsb2FkLmZhbWlseV9uYW1lO1xyXG4gICAgLy8gY29uc3QgcHJvZmlsZVBpY3R1cmUgPSBwYXlsb2FkLnBpY3R1cmU7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHVzZXIgZXhpc3RzIGluIHRoZSBkYXRhYmFzZSB1c2luZyBlbWFpbFxyXG4gICAgbGV0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB3aGVyZTogeyBlbWFpbCB9IH0pO1xyXG5cclxuICAgIC8vIElmIHRoZSB1c2VyIGRvZXMgbm90IGV4aXN0LCBjcmVhdGUgYSBuZXcgdXNlclxyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ0FjY291bnQgZG9lcyBub3QgZXhpc3QuIFBsZWFzZSBjcmVhdGUgYW4gYWNjb3VudCBmaXJzdC4nKTtcclxuICAgICAgICBlcnJvci5zdGF0dXNDb2RlID0gNDA0O1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgSldUIHRva2VuXHJcbiAgICBjb25zdCBhdXRoVG9rZW4gPSBqd3Quc2lnbih7IHVzZXJJZDogdXNlci5pZCwgcm9sZTogdXNlci5yb2xlIH0sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQsIHsgZXhwaXJlc0luOiAnMWgnIH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHVzZXJJZDogdXNlci5pZCxcclxuICAgICAgZmlyc3ROYW1lOiB1c2VyLmZpcnN0TmFtZSxcclxuICAgICAgbGFzdE5hbWU6IHVzZXIubGFzdE5hbWUsXHJcbiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gICAgICBwcm9maWxlUGljdHVyZTogdXNlci5wcm9maWxlUGljdHVyZSxcclxuICAgICAgdG9rZW46IGF1dGhUb2tlbixcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdvb2dsZUxvZ2luOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0geyBnb29nbGVMb2dpbiB9OyJdLCJtYXBwaW5ncyI6IncrS0FjVTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0FkVixLQUFNLENBQUVFLFlBQWEsQ0FBQyxFQUFBRixhQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLHFCQUFxQixDQUFDLEVBQ3ZELEtBQU0sQ0FBRUMsSUFBSyxDQUFDLEVBQUFMLGFBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsY0FBYyxDQUFDLEVBQUU7QUFDMUMsS0FBTSxDQUFBRSxHQUFHLEVBQUFOLGFBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsY0FBYyxDQUFDLEVBRW5DLEtBQU0sQ0FBQUcsTUFBTSxFQUFBUCxhQUFBLEdBQUFHLENBQUEsTUFBRyxHQUFJLENBQUFELFlBQVksQ0FBQ00sT0FBTyxDQUFDQyxHQUFHLENBQUNDLGdCQUFnQixDQUFDLEVBQUFWLGFBQUEsR0FBQUcsQ0FBQSxNQUU3RCxLQUFNLENBQUFRLFdBQVcsQ0FBRyxLQUFPLENBQUFDLEtBQUssRUFBSyxDQUFBWixhQUFBLEdBQUFhLENBQUEsTUFBQWIsYUFBQSxHQUFBRyxDQUFBLE1BQ25DLEdBQUksQ0FDRjtBQUNBLEtBQU0sQ0FBQVcsTUFBTSxFQUFBZCxhQUFBLEdBQUFHLENBQUEsTUFBRyxLQUFNLENBQUFJLE1BQU0sQ0FBQ1EsYUFBYSxDQUFDLENBQ3hDQyxPQUFPLENBQUVKLEtBQUssQ0FDZEssUUFBUSxDQUFFVCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsZ0JBQ3hCLENBQUMsQ0FBQyxFQUVGLEtBQU0sQ0FBQVEsT0FBTyxFQUFBbEIsYUFBQSxHQUFBRyxDQUFBLE1BQUdXLE1BQU0sQ0FBQ0ssVUFBVSxDQUFDLENBQUMsRUFDbkMsS0FBTSxDQUFBQyxLQUFLLEVBQUFwQixhQUFBLEdBQUFHLENBQUEsTUFBR2UsT0FBTyxDQUFDRSxLQUFLLEVBQUU7QUFDN0I7QUFDQTtBQUNBO0FBRUE7QUFDQSxHQUFJLENBQUFDLElBQUksRUFBQXJCLGFBQUEsR0FBQUcsQ0FBQSxNQUFHLEtBQU0sQ0FBQUUsSUFBSSxDQUFDaUIsT0FBTyxDQUFDLENBQUVDLEtBQUssQ0FBRSxDQUFFSCxLQUFNLENBQUUsQ0FBQyxDQUFDLEVBRW5EO0FBQUFwQixhQUFBLEdBQUFHLENBQUEsT0FDQSxHQUFJLENBQUNrQixJQUFJLENBQUUsQ0FBQXJCLGFBQUEsR0FBQXdCLENBQUEsU0FDUCxLQUFNLENBQUFDLEtBQUssRUFBQXpCLGFBQUEsR0FBQUcsQ0FBQSxPQUFHLEdBQUksQ0FBQXVCLEtBQUssQ0FBQyx5REFBeUQsQ0FBQyxFQUFBMUIsYUFBQSxHQUFBRyxDQUFBLE9BQ2xGc0IsS0FBSyxDQUFDRSxVQUFVLENBQUcsR0FBRyxDQUFBM0IsYUFBQSxHQUFBRyxDQUFBLE9BQ3RCLEtBQU0sQ0FBQXNCLEtBQUssQ0FDYixNQUFBekIsYUFBQSxHQUFBd0IsQ0FBQSxVQUVGO0FBQ0EsS0FBTSxDQUFBSSxTQUFTLEVBQUE1QixhQUFBLEdBQUFHLENBQUEsT0FBR0csR0FBRyxDQUFDdUIsSUFBSSxDQUFDLENBQUVDLE1BQU0sQ0FBRVQsSUFBSSxDQUFDVSxFQUFFLENBQUVDLElBQUksQ0FBRVgsSUFBSSxDQUFDVyxJQUFLLENBQUMsQ0FBRXhCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDd0IsVUFBVSxDQUFFLENBQUVDLFNBQVMsQ0FBRSxJQUFLLENBQUMsQ0FBQyxFQUFBbEMsYUFBQSxHQUFBRyxDQUFBLE9BRTdHLE1BQU8sQ0FDTDJCLE1BQU0sQ0FBRVQsSUFBSSxDQUFDVSxFQUFFLENBQ2ZJLFNBQVMsQ0FBRWQsSUFBSSxDQUFDYyxTQUFTLENBQ3pCQyxRQUFRLENBQUVmLElBQUksQ0FBQ2UsUUFBUSxDQUN2QmhCLEtBQUssQ0FBRUMsSUFBSSxDQUFDRCxLQUFLLENBQ2pCaUIsY0FBYyxDQUFFaEIsSUFBSSxDQUFDZ0IsY0FBYyxDQUNuQ3pCLEtBQUssQ0FBRWdCLFNBQ1QsQ0FBQyxDQUNILENBQUUsTUFBT0gsS0FBSyxDQUFFLENBQUF6QixhQUFBLEdBQUFHLENBQUEsT0FDZG1DLE9BQU8sQ0FBQ2IsS0FBSyxDQUFDLHVCQUF1QixDQUFFQSxLQUFLLENBQUMsQ0FBQXpCLGFBQUEsR0FBQUcsQ0FBQSxPQUM3QyxLQUFNLENBQUFzQixLQUFLLENBQ2IsQ0FDRixDQUFDLENBQUF6QixhQUFBLEdBQUFHLENBQUEsT0FFRG9DLE1BQU0sQ0FBQ0MsT0FBTyxDQUFHLENBQUU3QixXQUFZLENBQUMsQyIsImlnbm9yZUxpc3QiOltdfQ==